<% @challenge_data = challenges[@challenge_name.to_sym] %>
<% content_for :navbar do %>
  <%= render 'layouts/dashboard_navbar' %>
<% end %>

<script>
  <% if @challenge_data.key?(:videoID) %>
    var challengeVideoID = "<%= @challenge_data[:videoID] %>";
    var showVideo = true;
  <% else %>
    var showVideo = false;
  <% end %>
  var challengeName = "<%= @challenge_name %>";
  var already_unlocked = <%= @already_unlocked %>;
  <% if !@already_unlocked %>
    $('#challenge-modal').modal('show');
  <% end %>
</script>

<div class="challenge-page">
  <div class="heading">
    <h1 class="title">
      <%= @challenge_name %>
    </h1>
    <h5>Instructions/descriptor text about how to do challenges etc. </h5>
  </div>
  <div class="challenges-content">
    <% (1..7).each do %>
      <div class="challenge-box">
        <div class="challenge-icon">
          <%= image_tag 'placeholder.png', size:"150x150"%>
        </div>
        <div class="challenge-info">
          <h5 class="challenge-name">Challenge Name</h5>
          <button type="button" class="show-hidden">
            <i class="fas fa-chevron-down"></i>
            <i class="fas fa-chevron-up" style="display:none;"></i>
          </button>
          <p class="challenge-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas convallis nisl ac eleifend lacinia. Donec nec hendrerit orci. In consequat augue et eleifend tempor. Quisque facilisis faucibus urna, sed vestibulum ex molestie sit amet. Nullam in luctus magna. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam tortor nisi, aliquet et elementum in, porta nec erat.</p>
          <div class="hidden" style="display:none;">
            <div class="learn-more">
              <h7><strong>Learn More</strong></h7>
              <div class="links">
                <a>learn more link</a>
              </div>
            </div>
            <div class="start-challenge">
              <h6><strong>How long do you want to take this challenge for?</strong></h6>
              <%= select_tag "weeks", options_for_select((1..8).to_a)%> <span class="label"> week(s) starting today</span><br>
              <button type="button" class="btn add-challenge-button" name="button">ADD CHALLENGE</button>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>


  <div class="modal" id="challenge-modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-close">
          <button type="button" class="close" onclick="location.href='/themes';" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="first slide">
            <h1 class="modalHeader">UNLOCK <%= @challenge_name %></h1>
            <% if !@challenge_data.key?(:videoID) %>
              <p class="helpText"><%= @challenge_data[:videoCaption] %></p>
            <% else %>
              <p class="helpText">In order to unlock this theme, click the arrow to learn more about <%= @challenge_name.downcase %>.</p>
              <div class="arrow">
                <button type="button" name="next-arrow" onclick="nextArrow();">
                  <%= image_tag 'arrow.svg', size: '128x80' %>
                </button>
              </div>
            <% end %>
          </div>
          <div class="second slide">
            <div id="video"></div>
            <p class="helpText"><%= @challenge_data[:videoCaption] %></p>
          </div>
          <div class="third slide">
            <div class="challenge-unlock helpText">
                <div class="cool fadeIn">
                  Cool! You just unlocked<br>the <%= @challenge_name %> challenge!
                </div>
                <div class="checkbox">
                  <svg width="90" height="90">
                    <path id="check" d="M 15 50 L 40 70 L 74 24 "></path>
                  </svg>
                </div>
                <div class="cool fadeIn">
                  Now, letâ€™s make a difference!
                </div>
             </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
